obo2 <- data.frame(id=obo$observation_id,
user_id=2,
specie_id=obo$specie_id,
location_id=obo$location_id,
resource_id=obo$resource_id,
resource_secondary_id=obo$resource_secondary_id,
access="t",
approved="t",
created_at="",
updated_at=""
)
head(obo2)
obo2 <- obo2[!duplicated(obo2),]
head(obo2)
obsdups <- obo2$id[duplicated(obo2$id)]
obsdups
max(obo2$id)
obo2$id <- obo2$id + 200000
obo2$specie_id <- as.numeric(gsub("s|S", "", obo2$specie_id))
obo2$specie_id <- obo2$specie_id + 2000
obo2$location_id[grepl("l|n", obo2$location_id)] <- as.numeric(gsub("l|n", "", obo2$location_id[grepl("l|n", obo2$location_id)])) + 2000
obo2$resource_id[grepl("r", obo2$resource_id)] <- as.numeric(gsub("r", "", obo2$resource_id[grepl("r", obo2$resource_id)])) + 1000
obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)] <- as.numeric(gsub("r", "", obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)])) + 1000
write.csv(obo2, "octocorals/observations.csv", quote = commas(obo2), row.names = FALSE, na = "")
head(obo)
ome2 <- data.frame(id=obo$measurement_id,
user_id=2,
observation_id=obo$observation_id,
trait_id=obo$trait_id,
standard_id=obo$standard_id,
methodology_id=obo$methodology_id,
value=obo$value,
valuetype_id=obo$value_type,
precision=obo$precision,
precisiontype_id=obo$precision_type,
precision_upper=obo$precision_upper,
replicates=obo$replicates,
measurement_description=paste(obo$notes, obo$original_taxa_used_to_code_trait_value, obo$Status_of_original_taxa_name),
created_at="",
updated_at=""
)
ome2$trait_id[grepl("t", ome2$trait_id)] <- as.numeric(gsub("t", "", ome2$trait_id[grepl("t", ome2$trait_id)])) + 500
ome2$standard_id
unique(ome2$standard_id)
ome2$trait_id[grepl("t", ome2$trait_id)] <- as.numeric(gsub("t", "", ome2$trait_id[grepl("t", ome2$trait_id)])) + 500
ome2$standard_id[grepl("st", ome2$standard_id)] <- as.numeric(gsub("st", "", ome2$standard_id[grepl("st", ome2$standard_id)])) + 100
ome2$methodology_id[grepl("mt", ome2$methodology_id)] <- as.numeric(gsub("mt", "", ome2$methodology_id[grepl("mt", ome2$methodology_id)])) + 200
head(ome2)
unique(ome2$valuetype_id)
unique(ome2$precisiontype_id)
unique(ome2$valuetype_id)
unique(ome2$valuetype_id)
ome2$valuetype_id[ome2$valuetype_id == " mean"] <- "mean"
ome2$valuetype_id[ome2$valuetype_id == " maximum"] <- "maximum"
unique(ome2$valuetype_id)
ome2$valuetype_id[ome2$valuetype_id == "raw_value "] <- "raw_value"
unique(ome2$valuetype_id)
vtmap
ome2[ome2$valuetype_id == "",]
ome2$valuetype_id[ome2$valuetype_id == ""] <- "raw_value"
unique(ome2$valuetype_id)
ome2[ome2$valuetype_id == "",]
unique(ome2$precisiontype_id)
ptmap
unique(obo$valuetype_id)
unique(obo$value_type)
ome2$value_type[ome2$value_type == "raw_value "] <- "raw_value"
obo$value_type[obo$value_type == "raw_value "] <- "raw_value"
obo$value_type[obo$value_type == " mean"] <- "mean"
obo$value_type[obo$value_type == " maximum"] <- "maximum"
unique(obo$value_type)
obo$value_type[obo$value_type == ""] <- "raw_value"
unique(obo$value_type)
vtmap
unique(obo$precision_type)
head(obo)
vtmap
ptmap
obo <- merge(obo, vtmap, all.x = TRUE)
obo <- merge(obo, ptmap, all.x = TRUE)
head(obo)
ome2 <- data.frame(id=obo$measurement_id,
user_id=2,
observation_id=obo$observation_id,
trait_id=obo$trait_id,
standard_id=obo$standard_id,
methodology_id=obo$methodology_id,
value=obo$value,
valuetype_id=obo$valuetype_id,
precision=obo$precision,
precisiontype_id=obo$precisiontype_id,
precision_upper=obo$precision_upper,
replicates=obo$replicates,
measurement_description=paste(obo$notes, obo$original_taxa_used_to_code_trait_value, obo$Status_of_original_taxa_name),
created_at="",
updated_at=""
)
ome2$trait_id[grepl("t", ome2$trait_id)] <- as.numeric(gsub("t", "", ome2$trait_id[grepl("t", ome2$trait_id)])) + 500
ome2$standard_id[grepl("st", ome2$standard_id)] <- as.numeric(gsub("st", "", ome2$standard_id[grepl("st", ome2$standard_id)])) + 100
ome2$methodology_id[grepl("mt", ome2$methodology_id)] <- as.numeric(gsub("mt", "", ome2$methodology_id[grepl("mt", ome2$methodology_id)])) + 200
head(ome2)
write.csv(ome2, "octocorals/measurements.csv", quote = commas(ome2), row.names = FALSE, na = "")
max(hme2$id)
ome2$id <- ome2$id + 250000
write.csv(ome2, "octocorals/measurements.csv", quote = commas(ome2), row.names = FALSE, na = "")
obo <- read.csv("octocorals_original/database_v_5april.csv", as.is=TRUE)
ome2[ome2$value == "3e+05",]
ome2[ome2 == "3e+05",]
ome2[ome2 == "3e+05"]
ome2$observation_id <- ome2$observation_id + 250000
write.csv(ome2, "octocorals/measurements.csv", quote = commas(ome2), row.names = FALSE, na = "")
ome2 <- data.frame(id=obo$measurement_id,
user_id=2,
observation_id=obo$observation_id,
trait_id=obo$trait_id,
standard_id=obo$standard_id,
methodology_id=obo$methodology_id,
value=obo$value,
valuetype_id=obo$valuetype_id,
precision=obo$precision,
precisiontype_id=obo$precisiontype_id,
precision_upper=obo$precision_upper,
replicates=obo$replicates,
measurement_description=paste(obo$notes, obo$original_taxa_used_to_code_trait_value, obo$Status_of_original_taxa_name),
created_at="",
updated_at=""
)
obo <- read.csv("octocorals_original/database_v_5april.csv", as.is=TRUE)
head(obo)
obo2 <- data.frame(id=obo$observation_id,
user_id=2,
specie_id=obo$specie_id,
location_id=obo$location_id,
resource_id=obo$resource_id,
resource_secondary_id=obo$resource_secondary_id,
access="t",
approved="t",
created_at="",
updated_at=""
)
head(obo2)
obo2 <- obo2[!duplicated(obo2),]
head(obo2)
obo2$id[duplicated(obo2$id)]
max(obo2$id)
obo2$id <- obo2$id + 200000
obo2$specie_id <- as.numeric(gsub("s|S", "", obo2$specie_id))
obo2$specie_id <- obo2$specie_id + 2000
obo2$location_id[grepl("l|n", obo2$location_id)] <- as.numeric(gsub("l|n", "", obo2$location_id[grepl("l|n", obo2$location_id)])) + 2000
obo2$resource_id[grepl("r", obo2$resource_id)] <- as.numeric(gsub("r", "", obo2$resource_id[grepl("r", obo2$resource_id)])) + 1000
obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)] <- as.numeric(gsub("r", "", obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)])) + 1000
write.csv(obo2, "octocorals/observations.csv", quote = commas(obo2), row.names = FALSE, na = "")
head(obo)
unique(obo$value_type)
obo$value_type[obo$value_type == "raw_value "] <- "raw_value"
obo$value_type[obo$value_type == " mean"] <- "mean"
obo$value_type[obo$value_type == " maximum"] <- "maximum"
obo$value_type[obo$value_type == ""] <- "raw_value"
unique(obo$value_type)
unique(obo$precision_type)
obo <- merge(obo, vtmap, all.x = TRUE)
obo <- merge(obo, ptmap, all.x = TRUE)
ome2 <- data.frame(id=obo$measurement_id,
user_id=2,
observation_id=obo$observation_id,
trait_id=obo$trait_id,
standard_id=obo$standard_id,
methodology_id=obo$methodology_id,
value=obo$value,
valuetype_id=obo$valuetype_id,
precision=obo$precision,
precisiontype_id=obo$precisiontype_id,
precision_upper=obo$precision_upper,
replicates=obo$replicates,
measurement_description=paste(obo$notes, obo$original_taxa_used_to_code_trait_value, obo$Status_of_original_taxa_name),
created_at="",
updated_at=""
)
ome2$trait_id[grepl("t", ome2$trait_id)] <- as.numeric(gsub("t", "", ome2$trait_id[grepl("t", ome2$trait_id)])) + 500
ome2$standard_id[grepl("st", ome2$standard_id)] <- as.numeric(gsub("st", "", ome2$standard_id[grepl("st", ome2$standard_id)])) + 100
ome2$methodology_id[grepl("mt", ome2$methodology_id)] <- as.numeric(gsub("mt", "", ome2$methodology_id[grepl("mt", ome2$methodology_id)])) + 200
ome2$observation_id <- ome2$observation_id + 250000
write.csv(ome2, "octocorals/measurements.csv", quote = commas(ome2), row.names = FALSE, na = "")
obo <- read.csv("octocorals_original/database_v_5april.csv", as.is=TRUE)
head(obo)
obo2 <- data.frame(id=obo$observation_id,
user_id=2,
specie_id=obo$specie_id,
location_id=obo$location_id,
resource_id=obo$resource_id,
resource_secondary_id=obo$resource_secondary_id,
access="t",
approved="t",
created_at="",
updated_at=""
)
head(obo2)
obo2 <- obo2[!duplicated(obo2),]
head(obo2)
obo2$id[duplicated(obo2$id)]
max(obo2$id)
obo2$id <- obo2$id + 200000
obo2$specie_id <- as.numeric(gsub("s|S", "", obo2$specie_id))
obo2$specie_id <- obo2$specie_id + 2000
obo2$location_id[grepl("l|n", obo2$location_id)] <- as.numeric(gsub("l|n", "", obo2$location_id[grepl("l|n", obo2$location_id)])) + 2000
obo2$resource_id[grepl("r", obo2$resource_id)] <- as.numeric(gsub("r", "", obo2$resource_id[grepl("r", obo2$resource_id)])) + 1000
obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)] <- as.numeric(gsub("r", "", obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)])) + 1000
write.csv(obo2, "octocorals/observations.csv", quote = commas(obo2), row.names = FALSE, na = "")
### MEAS
head(obo)
unique(obo$value_type)
obo$value_type[obo$value_type == "raw_value "] <- "raw_value"
obo$value_type[obo$value_type == " mean"] <- "mean"
obo$value_type[obo$value_type == " maximum"] <- "maximum"
obo$value_type[obo$value_type == ""] <- "raw_value"
unique(obo$value_type)
unique(obo$precision_type)
obo <- merge(obo, vtmap, all.x = TRUE)
obo <- merge(obo, ptmap, all.x = TRUE)
ome2 <- data.frame(id=obo$measurement_id,
user_id=2,
observation_id=obo$observation_id,
trait_id=obo$trait_id,
standard_id=obo$standard_id,
methodology_id=obo$methodology_id,
value=obo$value,
valuetype_id=obo$valuetype_id,
precision=obo$precision,
precisiontype_id=obo$precisiontype_id,
precision_upper=obo$precision_upper,
replicates=obo$replicates,
measurement_description=paste(obo$notes, obo$original_taxa_used_to_code_trait_value, obo$Status_of_original_taxa_name),
created_at="",
updated_at=""
)
# ome2$observation_id[obo$observation_id %in% obsdups] <- obo$observation_id[obo$observation_id %in% obsdups] + 100000
ome2$trait_id[grepl("t", ome2$trait_id)] <- as.numeric(gsub("t", "", ome2$trait_id[grepl("t", ome2$trait_id)])) + 500
ome2$standard_id[grepl("st", ome2$standard_id)] <- as.numeric(gsub("st", "", ome2$standard_id[grepl("st", ome2$standard_id)])) + 100
ome2$methodology_id[grepl("mt", ome2$methodology_id)] <- as.numeric(gsub("mt", "", ome2$methodology_id[grepl("mt", ome2$methodology_id)])) + 200
head(ome2)
ome2$id <- ome2$id + 250000
ome2$observation_id <- ome2$observation_id + 200000
write.csv(ome2, "octocorals/measurements.csv", quote = commas(ome2), row.names = FALSE, na = "")
obo <- read.csv("octocorals_original/database_v_5april.csv", as.is=TRUE)
head(obo)
unique(obo$value_type)
unique(obo$value_type)
obo$value_type[obo$value_type == "raw_value "] <- "raw_value"
obo$value_type[obo$value_type == " mean"] <- "mean"
obo$value_type[obo$value_type == " maximum"] <- "maximum"
obo$value_type[obo$value_type == ""] <- "raw_value"
unique(obo$value_type)
unique(obo$precision_type)
obo <- merge(obo, vtmap, all.x = TRUE)
obo <- merge(obo, ptmap, all.x = TRUE)
vtmap
unique(obo$valuetype_id)
unique(obo$value_type)
vtmap
obo$value_type[obo$value_type == "mid_range"] <- "median"
obo <- read.csv("octocorals_original/database_v_5april.csv", as.is=TRUE)
head(obo)
head(obo)
unique(obo$value_type)
obo$value_type[obo$value_type == "raw_value "] <- "raw_value"
obo$value_type[obo$value_type == " mean"] <- "mean"
obo$value_type[obo$value_type == " maximum"] <- "maximum"
obo$value_type[obo$value_type == ""] <- "raw_value"
obo$value_type[obo$value_type == "mid_range"] <- "median"
unique(obo$value_type)
obo <- merge(obo, vtmap, all.x = TRUE)
obo <- merge(obo, ptmap, all.x = TRUE)
unique(obo$valuetype_id)
ome2 <- data.frame(id=obo$measurement_id,
user_id=2,
observation_id=obo$observation_id,
trait_id=obo$trait_id,
standard_id=obo$standard_id,
methodology_id=obo$methodology_id,
value=obo$value,
valuetype_id=obo$valuetype_id,
precision=obo$precision,
precisiontype_id=obo$precisiontype_id,
precision_upper=obo$precision_upper,
replicates=obo$replicates,
measurement_description=paste(obo$notes, obo$original_taxa_used_to_code_trait_value, obo$Status_of_original_taxa_name),
created_at="",
updated_at=""
)
# ome2$observation_id[obo$observation_id %in% obsdups] <- obo$observation_id[obo$observation_id %in% obsdups] + 100000
ome2$trait_id[grepl("t", ome2$trait_id)] <- as.numeric(gsub("t", "", ome2$trait_id[grepl("t", ome2$trait_id)])) + 500
ome2$standard_id[grepl("st", ome2$standard_id)] <- as.numeric(gsub("st", "", ome2$standard_id[grepl("st", ome2$standard_id)])) + 100
ome2$methodology_id[grepl("mt", ome2$methodology_id)] <- as.numeric(gsub("mt", "", ome2$methodology_id[grepl("mt", ome2$methodology_id)])) + 200
head(ome2)
ome2$id <- ome2$id + 250000
ome2$observation_id <- ome2$observation_id + 200000
write.csv(ome2, "octocorals/measurements.csv", quote = commas(ome2), row.names = FALSE, na = "")
hob <- read.csv("hexacorals_original/observations.csv", as.is=TRUE)
head(hob)
hob$private[hob$private=="t"] <- "tt"
hob$private[hob$private=="f"] <- "t"
hob$private[hob$private=="tt"] <- "f"
hob2 <- data.frame(id=hob$id,
user_id=1,
specie_id=hob$specie_id,
specie_original="",
location_id=hob$location_id,
resource_id=hob$resource_id,
resource_secondary_id=hob$resource_secondary_id,
access=hob$private,
approved="t",
created_at=hob$created_at,
updated_at=hob$updated_at
)
head(hob2)
max(hob2$id)
write.csv(hob2, "hexacorals/observations.csv", quote = commas(hob2), row.names = FALSE, na = "")
# Data merge
commas <- function(x) which(sapply(x, function(y) any(grepl(",",y))))
write.csv(hob2, "hexacorals/observations.csv", quote = commas(hob2), row.names = FALSE, na = "")
obo <- read.csv("octocorals_original/database_v_5april.csv", as.is=TRUE)
head(obo)
obo <- read.csv("octocorals_original/database_v_5april.csv", as.is=TRUE)
head(obo)
obo2 <- data.frame(id=obo$observation_id,
user_id=2,
specie_id=obo$specie_id,
specie_original=obo$original_taxa_used_to_code_trait_value,
location_id=obo$location_id,
resource_id=obo$resource_id,
resource_secondary_id=obo$resource_secondary_id,
access="t",
approved="t",
created_at="",
updated_at=""
)
head(obo2)
obo2 <- obo2[!duplicated(obo2),]
head(obo2)
obo2$id[duplicated(obo2$id)]
max(obo2$id)
obo2$id <- obo2$id + 200000
obo2$specie_id <- as.numeric(gsub("s|S", "", obo2$specie_id))
obo2$specie_id <- obo2$specie_id + 2000
obo2$location_id[grepl("l|n", obo2$location_id)] <- as.numeric(gsub("l|n", "", obo2$location_id[grepl("l|n", obo2$location_id)])) + 2000
obo2$resource_id[grepl("r", obo2$resource_id)] <- as.numeric(gsub("r", "", obo2$resource_id[grepl("r", obo2$resource_id)])) + 1000
obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)] <- as.numeric(gsub("r", "", obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)])) + 1000
write.csv(obo2, "octocorals/observations.csv", quote = commas(obo2), row.names = FALSE, na = "")
head(obo)
unique(obo$value_type)
obo$value_type[obo$value_type == "raw_value "] <- "raw_value"
obo$value_type[obo$value_type == " mean"] <- "mean"
obo$value_type[obo$value_type == " maximum"] <- "maximum"
obo$value_type[obo$value_type == ""] <- "raw_value"
obo$value_type[obo$value_type == "mid_range"] <- "median"
unique(obo$value_type)
unique(obo$precision_type)
obo <- merge(obo, vtmap, all.x = TRUE)
vtmap <- read.csv(text="value_type, valuetype_id
raw_value,1
mean,2
median,3
maximum,4
minimum,5
model_derived,6
expert_opinion,7
group_opinion,8
")
unique(hme$precision_type)
ptmap <- read.csv(text="precision_type, precisiontype_id
standard_error,1
standard_deviation,2
95_ci,3
range,4
not_given,5
")
vtmap <- read.csv(text="value_type, valuetype_id
raw_value,1
mean,2
median,3
maximum,4
minimum,5
model_derived,6
expert_opinion,7
group_opinion,8
")
head(obo)
unique(obo$value_type)
obo$value_type[obo$value_type == "raw_value "] <- "raw_value"
obo$value_type[obo$value_type == " mean"] <- "mean"
obo$value_type[obo$value_type == " maximum"] <- "maximum"
obo$value_type[obo$value_type == ""] <- "raw_value"
obo$value_type[obo$value_type == "mid_range"] <- "median"
unique(obo$value_type)
unique(obo$precision_type)
obo <- merge(obo, vtmap, all.x = TRUE)
obo <- merge(obo, ptmap, all.x = TRUE)
unique(obo$valuetype_id)
ome2 <- data.frame(id=obo$measurement_id,
user_id=2,
observation_id=obo$observation_id,
trait_id=obo$trait_id,
standard_id=obo$standard_id,
methodology_id=obo$methodology_id,
value=obo$value,
valuetype_id=obo$valuetype_id,
precision=obo$precision,
precisiontype_id=obo$precisiontype_id,
precision_upper=obo$precision_upper,
replicates=obo$replicates,
measurement_description="",
created_at="",
updated_at=""
) #paste(obo$notes, obo$original_taxa_used_to_code_trait_value, obo$Status_of_original_taxa_name)
# ome2$observation_id[obo$observation_id %in% obsdups] <- obo$observation_id[obo$observation_id %in% obsdups] + 100000
ome2$trait_id[grepl("t", ome2$trait_id)] <- as.numeric(gsub("t", "", ome2$trait_id[grepl("t", ome2$trait_id)])) + 500
ome2$standard_id[grepl("st", ome2$standard_id)] <- as.numeric(gsub("st", "", ome2$standard_id[grepl("st", ome2$standard_id)])) + 100
ome2$methodology_id[grepl("mt", ome2$methodology_id)] <- as.numeric(gsub("mt", "", ome2$methodology_id[grepl("mt", ome2$methodology_id)])) + 200
head(ome2)
ome2$id <- ome2$id + 250000
ome2$observation_id <- ome2$observation_id + 200000
write.csv(ome2, "octocorals/measurements.csv", quote = commas(ome2), row.names = FALSE, na = "")
unique(obo$original_taxa_used_to_code_trait_value)
obo$original_taxa_used_to_code_trait_value[nchar(obo$original_taxa_used_to_code_trait_value) <= 5] <- ""
unique(obo$original_taxa_used_to_code_trait_value)
obo <- read.csv("octocorals_original/database_v_5april.csv", as.is=TRUE)
head(obo)
obo2 <- data.frame(id=obo$observation_id,
user_id=2,
specie_id=obo$specie_id,
specie_original=obo$original_taxa_used_to_code_trait_value,
location_id=obo$location_id,
resource_id=obo$resource_id,
resource_secondary_id=obo$resource_secondary_id,
access="t",
approved="t",
created_at="",
updated_at=""
)
obo$original_taxa_used_to_code_trait_value[nchar(obo$original_taxa_used_to_code_trait_value) <= 5] <- ""
unique(obo$original_taxa_used_to_code_trait_value)
head(obo2)
obo2 <- obo2[!duplicated(obo2),]
head(obo2)
obo2$id[duplicated(obo2$id)]
max(obo2$id)
obo2$id <- obo2$id + 200000
obo2$specie_id <- as.numeric(gsub("s|S", "", obo2$specie_id))
obo2$specie_id <- obo2$specie_id + 2000
obo2$location_id[grepl("l|n", obo2$location_id)] <- as.numeric(gsub("l|n", "", obo2$location_id[grepl("l|n", obo2$location_id)])) + 2000
obo2$resource_id[grepl("r", obo2$resource_id)] <- as.numeric(gsub("r", "", obo2$resource_id[grepl("r", obo2$resource_id)])) + 1000
obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)] <- as.numeric(gsub("r", "", obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)])) + 1000
write.csv(obo2, "octocorals/observations.csv", quote = commas(obo2), row.names = FALSE, na = "")
obo <- read.csv("octocorals_original/database_v_5april.csv", as.is=TRUE)
head(obo)
obo2 <- data.frame(id=obo$observation_id,
user_id=2,
specie_id=obo$specie_id,
specie_original=obo$original_taxa_used_to_code_trait_value,
location_id=obo$location_id,
resource_id=obo$resource_id,
resource_secondary_id=obo$resource_secondary_id,
access="t",
approved="t",
created_at="",
updated_at=""
)
obo2$original_taxa_used_to_code_trait_value[nchar(obo2$original_taxa_used_to_code_trait_value) <= 5] <- ""
obo <- read.csv("octocorals_original/database_v_5april.csv", as.is=TRUE)
head(obo)
obo2 <- data.frame(id=obo$observation_id,
user_id=2,
specie_id=obo$specie_id,
specie_original=obo$original_taxa_used_to_code_trait_value,
location_id=obo$location_id,
resource_id=obo$resource_id,
resource_secondary_id=obo$resource_secondary_id,
access="t",
approved="t",
created_at="",
updated_at=""
)
obo2$original_taxa_used_to_code_trait_value[nchar(obo2$original_taxa_used_to_code_trait_value) <= 5] <- ""
obo2$original_taxa_used_to_code_trait_value
obo <- read.csv("octocorals_original/database_v_5april.csv", as.is=TRUE)
head(obo)
obo2 <- data.frame(id=obo$observation_id,
user_id=2,
specie_id=obo$specie_id,
specie_original=obo$original_taxa_used_to_code_trait_value,
location_id=obo$location_id,
resource_id=obo$resource_id,
resource_secondary_id=obo$resource_secondary_id,
access="t",
approved="t",
created_at="",
updated_at=""
)
obo2$specie_original[nchar(obo2$specie_original) <= 5] <- ""
unique(obo2$specie_original)
head(obo2)
obo2 <- obo2[!duplicated(obo2),]
head(obo2)
obo2$id[duplicated(obo2$id)]
max(obo2$id)
obo2$id <- obo2$id + 200000
obo2$specie_id <- as.numeric(gsub("s|S", "", obo2$specie_id))
obo2$specie_id <- obo2$specie_id + 2000
obo2$location_id[grepl("l|n", obo2$location_id)] <- as.numeric(gsub("l|n", "", obo2$location_id[grepl("l|n", obo2$location_id)])) + 2000
obo2$resource_id[grepl("r", obo2$resource_id)] <- as.numeric(gsub("r", "", obo2$resource_id[grepl("r", obo2$resource_id)])) + 1000
obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)] <- as.numeric(gsub("r", "", obo2$resource_secondary_id[grepl("r", obo2$resource_secondary_id)])) + 1000
write.csv(obo2, "octocorals/observations.csv", quote = commas(obo2), row.names = FALSE, na = "")
